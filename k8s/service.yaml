# =====================================================
# üåê Kubernetes Service zum Verbinden von Frontend & Backend
# =====================================================
# Services stellen sicher, dass Pods √ºber stabile IPs & DNS erreichbar sind
# und (optional) von au√üen erreichbar gemacht werden k√∂nnen.

apiVersion: v1
kind: Service
metadata:
  name: invoice-service               # Name des Services
spec:
  type: LoadBalancer                  # Exponiert die App nach au√üen (Hetzner Load Balancer)
  selector:
    app: invoice-frontend             # W√§hlt alle Pods mit diesem Label (Frontend)
  ports:
    - name: http
      port: 80                        # √ñffentlicher Port (au√üen sichtbar)
      targetPort: 3000                # Leitet Traffic an Container-Port des Frontends

---

apiVersion: v1
kind: Service
metadata:
  name: invoice-backend-service      # Name des Backend-Service
spec:
  type: ClusterIP                    # nur intern erreichbar (vom Frontend aus)
  selector:
    app: invoice-backend             # muss mit labels aus backend-deployment.yaml √ºbereinstimmen
  ports:
    - protocol: TCP
      port: 8000                     # Port f√ºr FastAPI
      targetPort: 8000               # Container-Port f√ºr FastAPI